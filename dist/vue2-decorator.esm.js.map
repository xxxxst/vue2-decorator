{"version":3,"file":"vue2-decorator.esm.js","sources":["../src/ComUtil.ts","../src/Comp.ts","../src/Inject.ts","../src/Model.ts","../src/Prop.ts","../src/Provide.ts","../src/Watch.ts","../src/State.ts"],"sourcesContent":["\r\nimport Vue from 'vue';\r\n\r\nexport default class ComUtil {\r\n\tstatic providePrefix = \"_vd_\";\r\n\tstatic formatProvideKey(key: string) {\r\n\t\treturn this.providePrefix + key;\r\n\t}\r\n\tstatic getOriginProvideKey(key: string) {\r\n\t\tif (key.indexOf(this.providePrefix) != 0) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\treturn key.substr(this.providePrefix.length);\r\n\t}\r\n\r\n\tstatic registProvideAttrToUserComp(local, vm, orgKey) {\r\n\t\t// var orgKey = ComUtil.getOriginProvideKey(key);\r\n\t\t// if (!orgKey) {\r\n\t\t// \treturn;\r\n\t\t// }\r\n\r\n\t\tObject.defineProperty(local, orgKey, {\r\n\t\t\tget: function get() {\r\n\t\t\t\treturn vm[orgKey];\r\n\t\t\t},\r\n\t\t\tset: function set(value) {\r\n\t\t\t\tvm[orgKey] = value;\r\n\t\t\t},\r\n\t\t\tconfigurable: true\r\n\t\t});\r\n\t}\r\n\r\n\tstatic registProvideAttrToVueComp(proto, key, option) {\r\n\t\tif (!option || !option.default || typeof (option.default) != \"object\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar orgKey = ComUtil.getOriginProvideKey(key);\r\n\t\tif (!orgKey) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tObject.defineProperty(proto, orgKey, {\r\n\t\t\tget: function get() {\r\n\t\t\t\tvar md = (key in this) ? this[key] : option.default;\r\n\t\t\t\treturn md.data;\r\n\t\t\t},\r\n\t\t\tset: function set(val) {\r\n\t\t\t\tvar md = (key in this) ? this[key] : option.default;\r\n\t\t\t\tmd.data = val;\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t}\r\n}","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue, { ComponentOptions, VueConstructor } from 'vue';\r\nimport type { Component as VueComponent, AsyncComponent } from 'vue/types/options';\r\nimport Component, { createDecorator } from 'vue-class-component';\r\nimport ComUtil from 'src/ComUtil';\r\n\r\ninterface ComponentOptionsComp<T extends Vue> extends ComponentOptions<T> {\r\n\t/** unused in vue2 */\r\n\temits?: any[];\r\n}\r\n\r\nclass UserComponentProxyInitParam {\r\n\tlocal: any = null;\r\n\toldInit: Function = null;\r\n\toptions: ComponentOptionsComp<Vue> = null;\r\n\tarrOldDefine: { key: string, obj: any }[] = [];\r\n}\r\n\r\nconst propDefaultValueKey = \"_vd_vmDefaultData\";\r\n\r\nfunction createInitUserComponentProxy(data: UserComponentProxyInitParam) {\r\n\treturn function _init(this: any) {\r\n\t\tdata.local = this;\r\n\t\tvar local = this;\r\n\t\tvar options = data.options;\r\n\t\tvar arrOldDefine = data.arrOldDefine;\r\n\t\tvar oldInit = data.oldInit;\r\n\r\n\t\t// add prop \"_self\"\r\n\t\tvar props = options.props || (options.props = {});\r\n\t\tvar propsSelfExist = (\"_self\" in props);\r\n\t\tif (!propsSelfExist) {\r\n\t\t\tprops[\"_self\"] = {\r\n\t\t\t\ttype: [Object, Array, String, Number, Boolean, Function],\r\n\t\t\t\tdefault: undefined,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// call oldInit\r\n\t\toldInit.apply(this, arguments);\r\n\r\n\t\tvar vm = this._self;\r\n\t\tif (!propsSelfExist) {\r\n\t\t\tdelete props[\"_self\"];\r\n\t\t}\r\n\t\t// var arrProxyKeys = [];\r\n\r\n\t\tfunction getCheckDefine(obj, key) {\r\n\t\t\tvar def = Object.getOwnPropertyDescriptor(obj, key);\r\n\t\t\tif (!def || !def.get || !def.set || !def.configurable) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn def;\r\n\t\t}\r\n\r\n\t\t// provide\r\n\t\tif (options.provide && typeof (options.provide) == \"function\" && options.provide[\"originProvide\"]) {\r\n\t\t\tvar objProvide = options.provide[\"originProvide\"];\r\n\t\t\t// proxy orgKey get/set\r\n\t\t\tfor (var key in objProvide) {\r\n\t\t\t\tif (typeof (objProvide[key]) != \"object\" || !objProvide[key].default) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tvar orgKey = ComUtil.getOriginProvideKey(key);\r\n\t\t\t\tif (!orgKey) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// arrProxyKeys.push({ key: orgKey, type: \"provide\" });\r\n\t\t\t\tComUtil.registProvideAttrToUserComp(local, vm, orgKey);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// inject\r\n\t\tif (options.inject) {\r\n\t\t\tvar objInject = options.inject;\r\n\t\t\tfor (var key in objInject) {\r\n\t\t\t\tvar orgKey = ComUtil.getOriginProvideKey(key);\r\n\t\t\t\tif (!orgKey) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// arrProxyKeys.push({ key: orgKey, type: \"inject\" });\r\n\t\t\t\tComUtil.registProvideAttrToUserComp(local, vm, orgKey);\r\n\r\n\t\t\t\tvar oldDefine = getCheckDefine(local, orgKey);\r\n\t\t\t\tif (!oldDefine) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tarrOldDefine.push({ key: orgKey, obj: oldDefine, });\r\n\t\t\t\t(function (nkeyTmp, keyTmp, oldDefineTmp) {\r\n\t\t\t\t\tObject.defineProperty(local, keyTmp, {\r\n\t\t\t\t\t\tget: oldDefineTmp.get,\r\n\t\t\t\t\t\tset: function (value) {\r\n\t\t\t\t\t\t\tif (!vm[nkeyTmp] || typeof (vm[nkeyTmp]) != \"object\" || vm[nkeyTmp].type != \"inject\") {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\toldDefineTmp.set.call(this, value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t})(key, orgKey, oldDefine);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// props\r\n\t\tvar props = options.props || {};\r\n\t\t// var vmProto = Object.getPrototypeOf(vm);\r\n\t\tvar objPropDefValueObj = vm[propDefaultValueKey] || (vm[propDefaultValueKey] = Vue.observable({}));\r\n\t\tfor (var key in props) {\r\n\t\t\tif (typeof (props[key]) != \"object\" || !(\"default\" in props[key])) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tVue.set(objPropDefValueObj, key, props[key].default);\r\n\r\n\t\t\t// arrProxyKeys.push({\r\n\t\t\t// \tkey: key,\r\n\t\t\t// \ttype: \"prop\",\r\n\t\t\t// \thandler: function (obj, defVal) {\r\n\t\t\t// \t\tprops[obj.key].default = defVal;\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\r\n\t\t\t// 在set选择器中判断该属性是否存在默认值\r\n\t\t\t// 如果存在，说明该属性已经跟其他值绑定，拒绝初始化赋值\r\n\t\t\t// 如果不存在，则赋予初始值，作为默认值\r\n\t\t\tvar oldDefine = getCheckDefine(local, key);\r\n\t\t\tif (!oldDefine) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tarrOldDefine.push({ key: key, obj: oldDefine, });\r\n\t\t\t(function (keyTmp, oldDefineTmp) {\r\n\t\t\t\tObject.defineProperty(local, keyTmp, {\r\n\t\t\t\t\tget: oldDefineTmp.get,\r\n\t\t\t\t\tset: function (value) {\r\n\t\t\t\t\t\tif (typeof (value) == \"function\") {\r\n\t\t\t\t\t\t\tprops[keyTmp].type = [Function, Object, Array, String, Number, Boolean];\r\n\t\t\t\t\t\t\tprops[keyTmp].default = value;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tprops[keyTmp].type = [Object, Array, String, Number, Boolean, Function];\r\n\t\t\t\t\t\t\tprops[keyTmp].default = () => value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// props[keyTmp].default = value;\r\n\t\t\t\t\t\tVue.set(objPropDefValueObj, keyTmp, value);\r\n\t\t\t\t\t\t// console.info(\"set1\", vm.$options && vm.$options.propsData && (obj.key in vm.$options.propsData));\r\n\t\t\t\t\t\t// cancel set default value if data bound\r\n\t\t\t\t\t\tif (vm.$options && vm.$options.propsData && (keyTmp in vm.$options.propsData)) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\toldDefineTmp.set.call(this, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t})(key, oldDefine);\r\n\t\t}\r\n\r\n\t\t// proxy props/provide/inject\r\n\t\t// for (var i = 0; i < arrProxyKeys.length; ++i) {\r\n\t\t// \tvar attrName = arrProxyKeys[i].key;\r\n\t\t// \tvar oldDefine = Object.getOwnPropertyDescriptor(local, attrName);\r\n\t\t// \tif (!oldDefine || !oldDefine.get || !oldDefine.set || !oldDefine.configurable) {\r\n\t\t// \t\tcontinue;\r\n\t\t// \t}\r\n\t\t// \tarrOldDefine.push({\r\n\t\t// \t\tkey: attrName,\r\n\t\t// \t\tobj: oldDefine,\r\n\t\t// \t});\r\n\t\t// \t// console.info(\"aaa\", attrName, oldDefine);\r\n\t\t// \t(function (obj, oldDefineTmp) {\r\n\t\t// \t\tObject.defineProperty(local, obj.key, {\r\n\t\t// \t\t\tget: oldDefineTmp.get,\r\n\t\t// \t\t\tset: function (value) {\r\n\t\t// \t\t\t\tswitch (obj.type) {\r\n\t\t// \t\t\t\t\tcase \"prop\": {\r\n\t\t// \t\t\t\t\t\tprops[obj.key].default = value;\r\n\t\t// \t\t\t\t\t\tVue.set(objPropDefValueObj, obj.key, value);\r\n\t\t// \t\t\t\t\t\t// console.info(\"set1\", vm.$options && vm.$options.propsData && (obj.key in vm.$options.propsData));\r\n\t\t// \t\t\t\t\t\t// cancel set default value if data bound\r\n\t\t// \t\t\t\t\t\tif (vm.$options && vm.$options.propsData && (obj.key in vm.$options.propsData)) {\r\n\t\t// \t\t\t\t\t\t\treturn;\r\n\t\t// \t\t\t\t\t\t}\r\n\t\t// \t\t\t\t\t\tbreak;\r\n\t\t// \t\t\t\t\t}\r\n\t\t// \t\t\t\t\t// case \"provide\": {\r\n\t\t// \t\t\t\t\t// \tbreak;\r\n\t\t// \t\t\t\t\t// }\r\n\t\t// \t\t\t\t\tcase \"inject\": {\r\n\t\t// \t\t\t\t\t\tvar nkey = ComUtil.formatProvideKey(obj.key);\r\n\t\t// \t\t\t\t\t\t// console.info(\"set2\", nkey, vm[obj.key], vm[nkey], vm);\r\n\t\t// \t\t\t\t\t\tif (!vm[nkey] || typeof (vm[nkey]) != \"object\" || vm[nkey].type != obj.type) {\r\n\t\t// \t\t\t\t\t\t\treturn;\r\n\t\t// \t\t\t\t\t\t}\r\n\t\t// \t\t\t\t\t\tbreak;\r\n\t\t// \t\t\t\t\t}\r\n\t\t// \t\t\t\t\tdefault: {\r\n\t\t// \t\t\t\t\t\tbreak;\r\n\t\t// \t\t\t\t\t}\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t\toldDefineTmp.set.call(this, value);\r\n\t\t// \t\t\t},\r\n\t\t// \t\t\tconfigurable: true,\r\n\t\t// \t\t});\r\n\t\t// \t})(arrProxyKeys[i], oldDefine);\r\n\t\t// }\r\n\t}\r\n}\r\n\r\n\r\n//class decorator\r\nexport default function Comp<V extends Vue>(comps?: Record<string, VueComponent>, options?: ComponentOptionsComp<V>) {\r\n\tif (!options) {\r\n\t\toptions = {};\r\n\t}\r\n\toptions.components = comps;\r\n\r\n\treturn function (target: VueConstructor<V>) {\r\n\t\tvar UserComponent = target as any;\r\n\r\n\t\toptions.name = options.name || UserComponent.name;\r\n\r\n\t\tvar proto = UserComponent.prototype;\r\n\t\tproto.unmounted && (proto.destroyed = proto.unmounted);\r\n\t\tproto.beforeUnmount && (proto.beforeDestroy = proto.beforeUnmount);\r\n\r\n\t\tclass UserComponentProxy extends UserComponent {\r\n\t\t\t// @ts-ignore\r\n\t\t\tconstructor() {\r\n\t\t\t\tvar param = new UserComponentProxyInitParam();\r\n\t\t\t\tparam.options = options;\r\n\t\t\t\tparam.oldInit = UserComponentProxy.prototype._init;\r\n\t\t\t\tUserComponentProxy.prototype._init = createInitUserComponentProxy(param);\r\n\r\n\t\t\t\t// proxy console.error\r\n\t\t\t\tvar defErr = console.error;\r\n\t\t\t\tconsole.error = function () { };\r\n\r\n\t\t\t\tsuper();\r\n\r\n\t\t\t\tconsole.error = defErr;\r\n\t\t\t\tUserComponentProxy.prototype._init = param.oldInit;\r\n\r\n\t\t\t\t// reset proxy\r\n\t\t\t\tif (param.local) {\r\n\t\t\t\t\tvar arrOldDefine = param.arrOldDefine;\r\n\t\t\t\t\tfor (var i = 0; i < arrOldDefine.length; ++i) {\r\n\t\t\t\t\t\tObject.defineProperty(param.local, arrOldDefine[i].key, arrOldDefine[i].obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tUserComponentProxy.prototype = UserComponent.prototype;\r\n\t\tUserComponentProxy._componentTag = UserComponent.name;\r\n\r\n\t\tcreateDecorator(function (componentOptions, k) {\r\n\t\t\t// provide\r\n\t\t\tif (options.provide && typeof (options.provide) == \"object\") {\r\n\t\t\t\tvar objProvide = options.provide;\r\n\t\t\t\toptions.provide = function (this: any) {\r\n\t\t\t\t\tvar map = {};\r\n\t\t\t\t\tfor (var key in objProvide) {\r\n\t\t\t\t\t\tmap[key] = objProvide[key].default;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn map;\r\n\t\t\t\t}\r\n\t\t\t\toptions.provide[\"originProvide\"] = objProvide;\r\n\t\t\t}\r\n\t\t})(UserComponentProxy as any);\r\n\r\n\t\tvar OriginVueComp = Component(options)(UserComponentProxy as any) as any;\r\n\r\n\t\t// prop\r\n\t\tvar props = options.props;\r\n\t\tif (props) {\r\n\t\t\tfor (var key in props) {\r\n\t\t\t\tif (typeof (props[key]) != \"object\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t(function (keyTmp, propTmp) {\r\n\t\t\t\t\tvar oldDefine = Object.getOwnPropertyDescriptor(OriginVueComp.prototype, keyTmp);\r\n\t\t\t\t\tif (!oldDefine) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tObject.defineProperty(OriginVueComp.prototype, keyTmp, {\r\n\t\t\t\t\t\tget: function () {\r\n\t\t\t\t\t\t\tvar rst = oldDefine.get.call(this);\r\n\t\t\t\t\t\t\tvar obj = this[propDefaultValueKey];\r\n\t\t\t\t\t\t\tif (!this.$options || !this.$options.propsData || !(keyTmp in this.$options.propsData)) {\r\n\t\t\t\t\t\t\t\treturn obj ? obj[keyTmp] : undefined;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn rst;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tset: function set(this: any, value) {\r\n\t\t\t\t\t\t\tif (!this.$options || !this.$options.propsData || !(keyTmp in this.$options.propsData)) {\r\n\t\t\t\t\t\t\t\tvar obj = this[propDefaultValueKey] || (this[propDefaultValueKey] = Vue.observable({}));\r\n\t\t\t\t\t\t\t\tobj && Vue.set(obj, keyTmp, value);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.$emit(\"update:\" + keyTmp, value);\r\n\t\t\t\t\t\t\t// console.info(\"set2\", keyTmp, value);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t})(key, props[key]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// provide\r\n\t\tif (options.provide && typeof (options.provide) == \"function\" && options.provide[\"originProvide\"]) {\r\n\t\t\tvar objProvide = options.provide[\"originProvide\"];\r\n\t\t\t// proxy orgKey get/set\r\n\t\t\tfor (var key in objProvide) {\r\n\t\t\t\tComUtil.registProvideAttrToVueComp(OriginVueComp.prototype, key, objProvide[key]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// inject\r\n\t\tif (options.inject) {\r\n\t\t\tvar objInject = options.inject;\r\n\t\t\tfor (var key in objInject) {\r\n\t\t\t\tComUtil.registProvideAttrToVueComp(OriginVueComp.prototype, key, objInject[key]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// unmounted / beforeUnmount\r\n\t\tvar optTmp = options as any;\r\n\t\tif (optTmp.unmounted) {\r\n\t\t\tmd.destroyed = md.unmounted;\r\n\t\t\tdelete optTmp.unmounted;\r\n\t\t}\r\n\t\tif (optTmp.beforeUnmount) {\r\n\t\t\tmd.beforeDestroy = md.beforeUnmount;\r\n\t\t\tdelete optTmp.beforeUnmount;\r\n\t\t}\r\n\r\n\t\t// mixins\r\n\t\tvar mixins = options.mixins;\r\n\t\tif (mixins) {\r\n\t\t\tfor (var i = 0; i < mixins.length; ++i) {\r\n\t\t\t\tif (typeof (mixins[i]) != \"object\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tvar md = mixins[i] as ComponentOptions<Vue> as any;\r\n\t\t\t\tif (md.unmounted) {\r\n\t\t\t\t\tmd.destroyed = md.unmounted;\r\n\t\t\t\t\tdelete md.unmounted;\r\n\t\t\t\t}\r\n\t\t\t\tif (md.beforeUnmount) {\r\n\t\t\t\t\tmd.beforeDestroy = md.beforeUnmount;\r\n\t\t\t\t\tdelete md.beforeUnmount;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn OriginVueComp;\r\n\t};\r\n}\r\n","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\nimport ComUtil from 'src/ComUtil';\r\n\r\n//attribute decorator\r\nexport default function Inject(provideName?: string) {\r\n\treturn function(this: any, target: Vue, key: string) {\r\n\t\tvar nkeyProvide = ComUtil.formatProvideKey(provideName || key);\r\n\t\tvar nkeyInject = ComUtil.formatProvideKey(key);\r\n\r\n\t\treturn createDecorator(function (componentOptions, k) {\r\n\t\t\tvar options = {\r\n\t\t\t\tfrom: nkeyProvide,\r\n\t\t\t\tdefault: Vue.observable({ data: undefined, type: \"inject\" }),\r\n\t\t\t};\r\n\t\t\t(componentOptions.inject || (componentOptions.inject = {}))[nkeyInject] = options;\r\n\t\t})(target, key);\r\n\t}\r\n}\r\n","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\n\r\n//attribute decorator\r\nexport default function Model() {\r\n\treturn (target: Vue, key: string) => {\r\n\t\tvar keyFun = \"update:\" + key;\r\n\r\n\t\treturn createDecorator(function (componentOptions, k) {\r\n\t\t\tvar options = {\r\n\t\t\t\ttype: [Object, Array, String, Number, Boolean, Function],\r\n\t\t\t\tevent: keyFun,\r\n\t\t\t\tdefault: undefined\r\n\t\t\t};\r\n\r\n\t\t\t// var copt = componentOptions as any;\r\n\r\n\t\t\t(componentOptions.props || (componentOptions.props = {}))[k] = options;\r\n\t\t\t// (componentOptions.model || (componentOptions.model = {}))[k] = { prop: k, event: keyFun };\r\n\t\t\tif (k == \"modelValue\" || !componentOptions.model) {\r\n\t\t\t\tcomponentOptions.model = { prop: k, event: keyFun };\r\n\t\t\t}\r\n\t\t})(target, key);\r\n\t}\r\n}\r\n","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\n\r\n//attribute decorator\r\nexport default function Prop() {\r\n\treturn (target: Vue, key: string) => {\r\n\r\n\t\treturn createDecorator(function (componentOptions, k) {\r\n\t\t\tvar options = {\r\n\t\t\t\ttype: [Object, Array, String, Number, Boolean, Function],\r\n\t\t\t\tdefault: undefined\r\n\t\t\t};\r\n\r\n\t\t\t(componentOptions.props || (componentOptions.props = {}))[k] = options;\r\n\t\t})(target, key);\r\n\t}\r\n}","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\nimport ComUtil from 'src/ComUtil';\r\n\r\n//attribute decorator\r\nexport default function Provide() {\r\n\treturn function(this: any, target: Vue, key: string) {\r\n\t\tvar nkey = ComUtil.formatProvideKey(key);\r\n\t\treturn createDecorator(function (componentOptions, k) {\r\n\t\t\tvar options = {\r\n\t\t\t\ttype: [Object, Array, String, Number, Boolean, Function],\r\n\t\t\t\tdefault: Vue.observable({ data: undefined, type: \"provide\" })\r\n\t\t\t};\r\n\t\t\t(componentOptions.provide || (componentOptions.provide = {}))[nkey] = options;\r\n\t\t})(target, key);\r\n\t}\r\n}\r\n","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\n\r\ninterface WathOption {\r\n\tname?: string;\r\n\tdeep?: boolean;\r\n\timmediate?: boolean;\r\n\t/** unused in vue2 */\r\n\tflush?: \"pre\" | \"post\" | \"sync\";\r\n}\r\n\r\nexport const DEEP = 0x1;\r\nexport const IMMEDIATE = 0x2;\r\n\r\n// Function decorator\r\nexport default function Watch(option?: WathOption | number) {\r\n\treturn (target: Vue, key: string, descriptor: any) => {\r\n\t\t// Wath attribute name\r\n\t\tvar name = \"\";\r\n\t\tif (typeof (option) == \"object\") {\r\n\t\t\tname = option.name || \"\";\r\n\t\t}\r\n\t\tif (name == \"\") {\r\n\t\t\tconst suffix = \"Changed\";\r\n\t\t\tif (key.substr(key.length - suffix.length) != \"Changed\") {\r\n\t\t\t\tconsole.error(\"function name should be : attr + 'Changed'\");\r\n\t\t\t}\r\n\t\t\tname = key.substr(0, key.length - suffix.length);\r\n\t\t}\r\n\r\n\t\t// parse option\r\n\t\tvar tmp: any = {};\r\n\t\tif (typeof (option) == \"object\") {\r\n\t\t\t// option is WathOption\r\n\t\t\tfor (var key in option) {\r\n\t\t\t\tif (key == \"name\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (key == \"flush\") {\r\n\t\t\t\t\tif (option.flush == \"sync\") {\r\n\t\t\t\t\t\ttmp.sync = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\ttmp[key] = option[key];\r\n\t\t\t}\r\n\t\t} else if (typeof (option) == \"number\") {\r\n\t\t\t// option is number\r\n\t\t\tif (option & DEEP) {\r\n\t\t\t\ttmp.deep = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (option & IMMEDIATE) {\r\n\t\t\t\ttmp.immediate = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttmp.handler = descriptor.value;\r\n\r\n\t\treturn createDecorator(function (componentOptions, k) {\r\n\t\t\tvar objWatch: any = componentOptions.watch || (componentOptions.watch = {});\r\n\t\t\tvar arr = [];\r\n\t\t\tif (name in objWatch) {\r\n\t\t\t\tif (objWatch[name] instanceof Array) {\r\n\t\t\t\t\tarr = objWatch[name];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tarr.push(objWatch[name]);\r\n\t\t\t\t\tobjWatch[name] = arr;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tobjWatch[name] = arr;\r\n\t\t\t}\r\n\t\t\tarr.push(tmp);\r\n\t\t\t// (objWatch[name] || objWatch[name] = []).push(tmp);\r\n\t\t\t// objWatch[name] = tmp;\r\n\t\t})(target, key);\r\n\t}\r\n}\r\n","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\n\r\n//attribute decorator\r\nexport default function State(attrName?: string) {\r\n\tfunction create(target: Vue, key: string) {\r\n\t\tvar name: string = attrName || key;\r\n\t\tname = name.trim();\r\n\r\n\t\tvar getVal = null;\r\n\t\tvar setVal = null;\r\n\r\n\t\tvar ch = \".\";\r\n\t\tif (name.charAt(0) == \"[\") {\r\n\t\t\tch = \"\";\r\n\t\t}\r\n\t\t\r\n\t\t/* eslint-disable */\r\n\t\tgetVal = eval(`(function() { return this.$store.state${ch}${name}; })`);\r\n\t\tsetVal = eval(`(function(val) { this.$store.state${ch}${name}=val; })`);\r\n\t\t/* eslint-disable */\r\n\r\n\t\tfunction initAttr(obj) {\r\n\t\t\tObject.defineProperty(obj, key, {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tget: () => { return getVal.call(obj); },\r\n\t\t\t\tset: (value: any) => { setVal.call(obj, value); },\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tcreateDecorator((componentOptions, handler) => {\r\n\t\t\tvar mixins = componentOptions.mixins || (componentOptions.mixins = []);\r\n\r\n\t\t\tmixins.push({\r\n\t\t\t\tdata: function () {\r\n\t\t\t\t\tinitAttr(this);\r\n\t\t\t\t\treturn {};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t})(target, key);\r\n\t}\r\n\r\n\treturn create;\r\n}\r\n"],"names":[],"mappings":"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"}