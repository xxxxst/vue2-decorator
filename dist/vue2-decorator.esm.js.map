{"version":3,"file":"vue2-decorator.esm.js","sources":["../src/ComUtil.ts","../src/Comp.ts","../src/Inject.ts","../src/Model.ts","../src/Prop.ts","../src/Provide.ts","../src/Watch.ts","../src/State.ts"],"sourcesContent":["\r\nimport Vue from 'vue';\r\n\r\nexport default class ComUtil {\r\n\tstatic providePrefix = \"_vd_\";\r\n\tstatic formatProvideKey(key: string) {\r\n\t\treturn this.providePrefix + key;\r\n\t}\r\n\tstatic getOriginProvideKey(key: string) {\r\n\t\tif (key.indexOf(this.providePrefix) != 0) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\treturn key.substr(this.providePrefix.length);\r\n\t}\r\n\tstatic vset(obj, key, val) {\r\n\t\treturn (Vue as any).set ? (Vue as any).set(obj, key, val) : (obj[key] = val);\r\n\t}\r\n\tstatic reactive(obj) {\r\n\t\treturn (Vue as any).reactive ? (Vue as any).reactive(obj) : (Vue as any).observable(obj);\r\n\t}\r\n}","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue, { ComponentOptions, VueConstructor } from 'vue';\r\nimport type { Component as VueComponent, AsyncComponent } from 'vue/types/options';\r\nimport Component, { createDecorator } from 'vue-class-component';\r\nimport ComUtil from 'src/ComUtil';\r\n\r\ninterface ComponentOptionsComp<T extends Vue> extends ComponentOptions<T> {\r\n\t/** unused in vue2 */\r\n\temits?: any[];\r\n}\r\n\r\n//class decorator\r\nexport default function Comp<V extends Vue>(comps?: Record<string, VueComponent>, options?: ComponentOptionsComp<V>) {\r\n\tconst defaultValueKey = \"_vd_vmDefaultData\";\r\n\r\n\tif (!options) {\r\n\t\toptions = {};\r\n\t}\r\n\toptions.components = comps;\r\n\r\n\treturn function (target: VueConstructor<V>) {\r\n\t\tvar UserComponent = target as any;\r\n\r\n\t\toptions.name = options.name || UserComponent.name;\r\n\r\n\t\tvar proto = UserComponent.prototype;\r\n\t\tproto.unmounted && (proto.destroyed = proto.unmounted);\r\n\t\tproto.beforeUnmount && (proto.beforeDestroy = proto.beforeUnmount);\r\n\t\t\r\n\t\t// decorate options\r\n\t\tvar oldDecorators = UserComponent.__decorators__;\r\n\t\toldDecorators && (UserComponent.__decorators__ = [function() {\r\n\t\t\toldDecorators.forEach(fn => fn(options));\r\n\t\t\t\r\n\t\t\t// unmounted / beforeUnmount\r\n\t\t\tvar optTmp = options as any;\r\n\t\t\tif (optTmp.unmounted) {\r\n\t\t\t\tmd.destroyed = md.unmounted;\r\n\t\t\t\tdelete optTmp.unmounted;\r\n\t\t\t}\r\n\t\t\tif (optTmp.beforeUnmount) {\r\n\t\t\t\tmd.beforeDestroy = md.beforeUnmount;\r\n\t\t\t\tdelete optTmp.beforeUnmount;\r\n\t\t\t}\r\n\r\n\t\t\t// mixins\r\n\t\t\tvar mixins = options.mixins;\r\n\t\t\tif (mixins) {\r\n\t\t\t\tfor (var i = 0; i < mixins.length; ++i) {\r\n\t\t\t\t\tif (typeof (mixins[i]) != \"object\") {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar md = mixins[i] as ComponentOptions<Vue> as any;\r\n\t\t\t\t\tif (md.unmounted) {\r\n\t\t\t\t\t\tmd.destroyed = md.unmounted;\r\n\t\t\t\t\t\tdelete md.unmounted;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (md.beforeUnmount) {\r\n\t\t\t\t\t\tmd.beforeDestroy = md.beforeUnmount;\r\n\t\t\t\t\t\tdelete md.beforeUnmount;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// provide/inject实现双向通信\r\n\t\t\t// 原始属性名添加前缀\"_vd_\"作为实际的provide/inject\r\n\t\t\t// provide原始属性名改为data属性\r\n\t\t\t// inject原始属性名改为computed属性\r\n\r\n\t\t\t// provide\r\n\t\t\tvar provide = options.provide;\r\n\t\t\tif (provide && typeof (provide) == \"object\") {\r\n\t\t\t\toptions.provide = function (this: any) {\r\n\t\t\t\t\tvar local = this;\r\n\t\t\t\t\tvar rst = {};\r\n\t\t\t\t\tfor (var key in provide) {\r\n\t\t\t\t\t\t(function (keyTmp) {\r\n\t\t\t\t\t\t\tvar orgKey = ComUtil.getOriginProvideKey(keyTmp);\r\n\t\t\t\t\t\t\trst[keyTmp] = {\r\n\t\t\t\t\t\t\t\tget data() { return local[orgKey] },\r\n\t\t\t\t\t\t\t\tset data(val) { ComUtil.vset(local, orgKey, val); },\r\n\t\t\t\t\t\t\t\ttype: \"provide\"\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t})(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn rst;\r\n\t\t\t\t};\r\n\t\t\t\toptions.provide[\"originProvide\"] = provide;\r\n\t\t\t}\r\n\r\n\t\t\t// inject\r\n\t\t\tvar inject = options.inject || {};\r\n\t\t\tfor (var key in inject) {\r\n\t\t\t\t(function (keyTmp) {\r\n\t\t\t\t\tvar orgKey = ComUtil.getOriginProvideKey(keyTmp);\r\n\t\t\t\t\t// 将初始化值传入vm，防止@Component() 将属性绑定为data\r\n\t\t\t\t\tObject.defineProperty(UserComponent.prototype, orgKey, {\r\n\t\t\t\t\t\tget(this: any) {\r\n\t\t\t\t\t\t\tvar md = this[keyTmp];\r\n\t\t\t\t\t\t\treturn md && md.data;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tset(this: any, val) {\r\n\t\t\t\t\t\t\tvar md = this[keyTmp];\r\n\t\t\t\t\t\t\t// 已经绑定provide，忽略初始化数据\r\n\t\t\t\t\t\t\tif (this._self && !this._self._data && md && md.type != \"inject\") {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmd && (md.data = val);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\t\tenumerable: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 将原始属性设置为computed\r\n\t\t\t\t\t(options.computed || (options.computed = {}))[orgKey] = {\r\n\t\t\t\t\t\tget(this: any) {\r\n\t\t\t\t\t\t\tvar md = this[keyTmp];\r\n\t\t\t\t\t\t\tif (md && md.type != \"inject\") {\r\n\t\t\t\t\t\t\t\treturn md.data;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar obj = this[defaultValueKey] || (this[defaultValueKey] = ComUtil.reactive({}));\r\n\t\t\t\t\t\t\tif (!(orgKey in obj)) {\r\n\t\t\t\t\t\t\t\tComUtil.vset(obj, orgKey, md && md.data);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn obj[orgKey];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tset(this: any, val) {\r\n\t\t\t\t\t\t\tvar md = this[keyTmp];\r\n\t\t\t\t\t\t\tif (md && md.type != \"inject\") {\r\n\t\t\t\t\t\t\t\tmd.data = val;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar obj = this[defaultValueKey] || (this[defaultValueKey] = ComUtil.reactive({}));\r\n\t\t\t\t\t\t\tComUtil.vset(obj, orgKey, val);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t})(key);\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\t// VueComponent\r\n\t\t//   |- UserComponent\r\n\t\t//     |- Vue\r\n\t\t// \r\n\t\t// VueComponent()\t\t\t\t\t\t\t// Component\r\n\t\t//   |- _init<Vue.extend>\t\t\t\t\t// vue\r\n\t\t//   |- mixins()\t\t\t\t\t\t\t// vue\r\n\t\t//   |- new UserComponent()\t\t\t\t\t// Comp\r\n\t\t//   |- Vue.constructor\t\t\t\t\t\t// vue\r\n\t\t//   |- _init<Comp>\t\t\t\t\t\t\t// Comp\r\n\t\t//   |- _init<Component>\t\t\t\t\t// Component\r\n\t\t//   |- UserComponent.constructor\t\t\t// <self projct>\r\n\t\t//  \\|\r\n\t\tvar OriginVueComp = Component(options)(UserComponent as any) as any;\r\n\r\n\t\t// prop\r\n\t\tvar props = options.props || {};\r\n\t\tfor (var key in props) {\r\n\t\t\tif (typeof (props[key]) != \"object\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t(function (keyTmp, valTmp) {\r\n\t\t\t\tvar oldDefine = Object.getOwnPropertyDescriptor(OriginVueComp.prototype, keyTmp);\r\n\t\t\t\toldDefine = oldDefine || { get() { return undefined; }, set(val) { } };\r\n\t\t\t\tObject.defineProperty(OriginVueComp.prototype, keyTmp, {\r\n\t\t\t\t\tget: function () {\r\n\t\t\t\t\t\tif (!this.$options || !this.$options.propsData || !(keyTmp in this.$options.propsData)) {\r\n\t\t\t\t\t\t\tvar obj = this[defaultValueKey] || (this[defaultValueKey] = ComUtil.reactive({}));\r\n\t\t\t\t\t\t\tif (!(keyTmp in obj)) {\r\n\t\t\t\t\t\t\t\tComUtil.vset(obj, keyTmp, valTmp && valTmp.default);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn obj[keyTmp];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn oldDefine.get.call(this);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tset: function set(this: any, value) {\r\n\t\t\t\t\t\tif (!this.$options || !this.$options.propsData || !(keyTmp in this.$options.propsData)) {\r\n\t\t\t\t\t\t\tvar obj = this[defaultValueKey] || (this[defaultValueKey] = ComUtil.reactive({}));\r\n\t\t\t\t\t\t\tobj && ComUtil.vset(obj, keyTmp, value);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 已经绑定prop，忽略初始化数据\r\n\t\t\t\t\t\tif (!this._data) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$emit(\"update:\" + keyTmp, value);\r\n\t\t\t\t\t\t// console.info(\"set2\", keyTmp, value);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t});\r\n\t\t\t})(key, props[key]);\r\n\t\t}\r\n\r\n\t\treturn OriginVueComp;\r\n\t};\r\n}\r\n","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\nimport ComUtil from 'src/ComUtil';\r\n\r\n//attribute decorator\r\nexport default function Inject(provideName?: string) {\r\n\treturn function(this: any, target: Vue, key: string) {\r\n\t\tvar nkeyProvide = ComUtil.formatProvideKey(provideName || key);\r\n\t\tvar nkeyInject = ComUtil.formatProvideKey(key);\r\n\r\n\t\treturn createDecorator(function (componentOptions, k) {\r\n\t\t\tvar options = {\r\n\t\t\t\tfrom: nkeyProvide,\r\n\t\t\t\tdefault: ComUtil.reactive({ data: undefined, type: \"inject\" }),\r\n\t\t\t};\r\n\t\t\t(componentOptions.inject || (componentOptions.inject = {}))[nkeyInject] = options;\r\n\t\t})(target, key);\r\n\t}\r\n}\r\n","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\n\r\n//attribute decorator\r\nexport default function Model() {\r\n\treturn (target: Vue, key: string) => {\r\n\t\tvar keyFun = \"update:\" + key;\r\n\r\n\t\treturn createDecorator(function (componentOptions, k) {\r\n\t\t\tvar options = {\r\n\t\t\t\ttype: [Object, Array, String, Number, Boolean, Function],\r\n\t\t\t\tevent: keyFun,\r\n\t\t\t\tdefault: undefined\r\n\t\t\t};\r\n\r\n\t\t\t(componentOptions.props || (componentOptions.props = {}))[k] = options;\r\n\t\t\tif (k == \"modelValue\" || !componentOptions.model) {\r\n\t\t\t\tcomponentOptions.model = { prop: k, event: keyFun };\r\n\t\t\t}\r\n\t\t})(target, key);\r\n\t}\r\n}\r\n","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\n\r\n//attribute decorator\r\nexport default function Prop() {\r\n\treturn (target: Vue, key: string) => {\r\n\r\n\t\treturn createDecorator(function (componentOptions, k) {\r\n\t\t\tvar options = {\r\n\t\t\t\ttype: [Object, Array, String, Number, Boolean, Function],\r\n\t\t\t\tdefault: undefined\r\n\t\t\t};\r\n\r\n\t\t\t(componentOptions.props || (componentOptions.props = {}))[k] = options;\r\n\t\t})(target, key);\r\n\t}\r\n}","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\nimport ComUtil from 'src/ComUtil';\r\n\r\n//attribute decorator\r\nexport default function Provide() {\r\n\treturn function(this: any, target: Vue, key: string) {\r\n\t\tvar nkey = ComUtil.formatProvideKey(key);\r\n\t\treturn createDecorator(function (componentOptions, k) {\r\n\t\t\tvar options = {\r\n\t\t\t\ttype: [Object, Array, String, Number, Boolean, Function],\r\n\t\t\t\tdefault: ComUtil.reactive({ data: undefined, type: \"provide\" })\r\n\t\t\t};\r\n\t\t\t(componentOptions.provide || (componentOptions.provide = {}))[nkey] = options;\r\n\t\t})(target, key);\r\n\t}\r\n}\r\n","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\n\r\ninterface WathOption {\r\n\tname?: string;\r\n\tdeep?: boolean;\r\n\timmediate?: boolean;\r\n\t/** unused in vue2 */\r\n\tflush?: \"pre\" | \"post\" | \"sync\";\r\n}\r\n\r\nexport const DEEP = 0x1;\r\nexport const IMMEDIATE = 0x2;\r\nexport const SYNC = 0x4;\r\n\r\n// Function decorator\r\nexport default function Watch(option?: WathOption | number) {\r\n\treturn (target: Vue, key: string, descriptor: any) => {\r\n\t\t// Wath attribute name\r\n\t\tvar name = \"\";\r\n\t\tif (typeof (option) == \"object\") {\r\n\t\t\tname = option.name || \"\";\r\n\t\t}\r\n\t\tif (name == \"\") {\r\n\t\t\tconst suffix = \"Changed\";\r\n\t\t\tif (key.substr(key.length - suffix.length) != \"Changed\") {\r\n\t\t\t\tconsole.error(\"function name should be : attr + 'Changed'\");\r\n\t\t\t}\r\n\t\t\tname = key.substr(0, key.length - suffix.length);\r\n\t\t}\r\n\r\n\t\t// parse option\r\n\t\tvar tmp: any = {};\r\n\t\tif (typeof (option) == \"object\") {\r\n\t\t\t// option is WathOption\r\n\t\t\tfor (var key in option) {\r\n\t\t\t\tif (key == \"name\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (key == \"flush\") {\r\n\t\t\t\t\tif (option.flush == \"sync\") {\r\n\t\t\t\t\t\ttmp.sync = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\ttmp[key] = option[key];\r\n\t\t\t}\r\n\t\t} else if (typeof (option) == \"number\") {\r\n\t\t\t// option is number\r\n\t\t\tif (option & DEEP) {\r\n\t\t\t\ttmp.deep = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (option & IMMEDIATE) {\r\n\t\t\t\ttmp.immediate = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (option & SYNC) {\r\n\t\t\t\ttmp.sync = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttmp.handler = descriptor.value;\r\n\r\n\t\treturn createDecorator(function (componentOptions, k) {\r\n\t\t\tvar objWatch: any = componentOptions.watch || (componentOptions.watch = {});\r\n\t\t\tvar arr = [];\r\n\t\t\tif (name in objWatch) {\r\n\t\t\t\tif (objWatch[name] instanceof Array) {\r\n\t\t\t\t\tarr = objWatch[name];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tarr.push(objWatch[name]);\r\n\t\t\t\t\tobjWatch[name] = arr;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tobjWatch[name] = arr;\r\n\t\t\t}\r\n\t\t\tarr.push(tmp);\r\n\t\t})(target, key);\r\n\t}\r\n}\r\n","\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) xxxxst. All rights reserved.\r\n *  Licensed under the MIT License\r\n *--------------------------------------------------------------------------------------------\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport { createDecorator } from 'vue-class-component';\r\n\r\n//attribute decorator\r\nexport default function State(attrName?: string) {\r\n\tfunction create(target: Vue, key: string) {\r\n\t\tvar name: string = attrName || key;\r\n\t\tname = name.trim();\r\n\r\n\t\tvar ch = \".\";\r\n\t\tif (name.charAt(0) == \"[\") {\r\n\t\t\tch = \"\";\r\n\t\t}\r\n\t\t\r\n\t\t/* eslint-disable */\r\n\t\tvar getVal = eval(`(function() { return this.$store.state${ch}${name}; })`);\r\n\t\tvar setVal = eval(`(function(val) { this.$store.state${ch}${name}=val; })`);\r\n\t\t/* eslint-disable */\r\n\r\n\t\tcreateDecorator((componentOptions, handler) => {\r\n\t\t\tvar mixins = componentOptions.mixins || (componentOptions.mixins = []);\r\n\r\n\t\t\tmixins.push({\r\n\t\t\t\tdata: function () {\r\n\t\t\t\t\tObject.defineProperty(this, key, {\r\n\t\t\t\t\t\tenumerable: true,\r\n\t\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\t\tget: getVal,\r\n\t\t\t\t\t\tset: setVal,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn {};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t})(target, key);\r\n\t}\r\n\r\n\treturn create;\r\n}\r\n"],"names":[],"mappings":"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"}